<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prepaid Insurance Calculator | LegoTax</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
header{background:#0b3a63;color:#fff;padding:15px 30px;font-size:22px;font-weight:bold}
.container{max-width:1000px;margin:30px auto;background:#fff;padding:25px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,.1)}
input,button{padding:10px;margin:5px;width:100%;border-radius:6px;border:1px solid #ccc}
button{cursor:pointer;font-weight:bold}
.add{background:#007bff;color:#fff}
.clear{background:#dc3545;color:#fff}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#e9ecef}
footer{text-align:center;margin:30px 0;color:#666}
</style>
</head>
<body>
<header>ðŸ”° LegoTax â€“ Prepaid Insurance Calculator</header>

<div class="container">
<h2>Add Insurance Policy</h2>

<label>Policy Name</label>
<input id="name">

<label>Purchase Date</label>
<input type="date" id="start">

<label>Policy Amount</label>
<input type="number" id="amount">

<label>Policy Duration (Years)</label>
<input type="number" id="years" value="1">

<button class="add" onclick="addPolicy()">ADD POLICY</button>
<button class="clear" onclick="clearAll()">CLEAR ALL</button>

<table id="table">
<thead>
<tr>
<th>Policy</th>
<th>FY Used</th>
<th>Amount Used</th>
<th>Prepaid Balance</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
<th colspan="2">TOTAL</th>
<th id="tUsed">0</th>
<th id="tPre">0</th>
</tr>
</tfoot>
</table>
</div>

<footer>Â© LegoTax | Designed & Developed by Mitanshu</footer>

<script>
function addPolicy(){
 let name=document.getElementById('name').value;
 let amount=parseFloat(document.getElementById('amount').value);
 let start=new Date(document.getElementById('start').value);
 let years=parseInt(document.getElementById('years').value);
 if(!name||!amount||!start||!years){alert('Fill all fields');return}
 let end=new Date(start); end.setFullYear(end.getFullYear()+years);
 let fyStart=new Date(start.getMonth()<3?start.getFullYear()-1:start.getFullYear(),3,1);
 let fyEnd=new Date(fyStart.getFullYear()+1,2,31);
 let totalDays=(end-start)/(1000*60*60*24);
 let perDay=amount/totalDays;
 let used=0;
 if(start<fyEnd && end>fyStart){
   let ps=start>fyStart?start:fyStart;
   let pe=end<fyEnd?end:fyEnd;
   let days=(pe-ps)/(1000*60*60*24);
   used=days*perDay;
 }
 let prepaid=amount-used;
 let row=`<tr><td>${name}</td><td>${fyStart.getFullYear()}-${fyEnd.getFullYear()}</td><td>${used.toFixed(2)}</td><td>${prepaid.toFixed(2)}</td></tr>`;
 document.querySelector('#table tbody').innerHTML+=row;
 updateTotal();
}

function updateTotal(){
 let tu=0,tp=0;
 document.querySelectorAll('#table tbody tr').forEach(r=>{
  tu+=parseFloat(r.cells[2].innerText);
  tp+=parseFloat(r.cells[3].innerText);
 });
 document.getElementById('tUsed').innerText=tu.toFixed(2);
 document.getElementById('tPre').innerText=tp.toFixed(2);
}

function clearAll(){
 document.querySelector('#table tbody').innerHTML='';
 document.getElementById('tUsed').innerText='0';
 document.getElementById('tPre').innerText='0';
}
</script>
</body>
</html>
